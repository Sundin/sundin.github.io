<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>A Successful Testing Strategy - Master of Software Engineering</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Master of Software Engineering" rel=home><div class="logo__item logo__text"><div class=logo__title>Master of Software Engineering</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>A Successful Testing Strategy</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Gustav Sundin</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-06-26T13:00:07Z>2019-06-26</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/Testing/ rel=category>Testing</a></span></div></div></header><div class="content post__content clearfix"><p>Today we will a closer look at the classic <a href=https://www.mountaingoatsoftware.com/blog/the-forgotten-layer-of-the-test-automation-pyramid>testing pyramid</a> and see how we can transform that into a concrete strategy for how to write your tests. While the terminology I use is not exactly the same as the one used by <a href=https://en.wikipedia.org/wiki/Mike_Cohn>Mike Cohn</a> when he first described the testing pyramid in his book <a href=https://www.mountaingoatsoftware.com/books/succeeding-with-agile-software-development-using-scrum>Succeeding with Agile</a>, the core concepts remain the same – a strong foundation of unit tests, complemented with a sufficient number of component tests (which are similar to Cohn&rsquo;s service tests) and sprinkled with a few end-to-end tests (which are called UI tests by Cohn) as a last line of defense.</p><h2 id=different-types-of-tests>Different types of tests</h2><p>The concepts thrown around when talking about abouted testing can sometimes be overlapping and confusing, so it can be useful to come up with a shared definition to use within your team. Below I will share the terminology that I prefer to use, but feel free to disagree as there is no real consensus within the industry around this concepts.</p><h3 id=unit-tests>Unit tests</h3><p>Unit tests are the lowest level of testing. Here you should strive to do the heavy working and catch as many problems as possible: syntax errors, logical bugs, corner cases, malformed input, broken UI etc. The reason why you should spend so much focus on writing unit tests is that unit tests are easy to write and fast to execute, meaning that you get near immmediate feedback as you develop the application. Ideally, your unit test suite should run on every code change and therefore it has to be really fast. You should aim at testing as small parts of the code as possible with each unit test so that you easily can locate where the problem is in case a test fails. In order to achieve this, unit testing will have to rely heavily on techniques such as <a href=http://wiki.c2.com/?MockObject>mocking</a> and <a href=https://en.wikipedia.org/wiki/Dependency_injection>dependency injection</a>.</p><p>Some examples of different kinds of unit tests:</p><ul><li>Backend logic tests with a mocked database.</li><li>Frontend logic tests, in particular business logic and commonly used helper/utility functions.</li><li><a href=https://jestjs.io/docs/en/snapshot-testing>Snapshot tests</a> in order to catch UI regressions.</li></ul><h3 id=component-tests>Component tests</h3><p>In order to test an entire component in isolation to all other components, we use something called component tests. You have to decide for yourself what your definition of a component should be, but in a microservice architecture each individual service will typically be considered its own component. Dependencies to other components should normally be mocked. The rationale for component tests is to verify that the component as a whole works as expected, without caring about its internal implementation details (as opposed to the unit tests, which according to my experience are usually more closely coupled with implemention details). Component tests should therefore have to change less frequently than the unit tests. Compared to end-to-end tests, contract tests will pinpoint errors at a more specific level and also usually be more reproducable as network flakiness will normally be mocked away.</p><p>Some examples of different kinds of component tests:</p><ul><li>Backend tests for a microservice using an actual database (preferrably a [Dockerized dummy database]({{ site.baseurl }}{% post_url 2019-03-29-dockerized-db-tests %})).</li><li><a href=https://www.cypress.io/>Cypress</a> tests with mocked backend calls.</li></ul><h3 id=contract-tests>Contract tests</h3><p>Contract tests are used to test the interfaces (such as APIs) between services in order to avoid regression. The reason is to prevent one service to suddenly change its interface in a way that breaks some other service that is dependent on it. Contract tests are particularly useful for services that are consumed across team-boundaries. You can choose to view the contract tests as a subset of the component tests described above, but I prefer to make the contract tests a first-class citizen of the testing strategy in order to stress their importance.</p><p>Some examples of frameworks for <a href=https://reflectoring.io/7-reasons-for-consumer-driven-contracts/>consumer-driven contract tests</a>:</p><ul><li><a href=https://docs.pact.io/>Pact</a></li><li><a href=https://spring.io/projects/spring-cloud-contract>Spring Cloud Contract</a></li></ul><h3 id=end-to-end-e2e-tests>End-to-end (E2E) tests</h3><p>As a last resort, you might have to rely on end-to-end (E2E) tests. These are tests that perform a real-life scenario or use case, throughout the whole call stack, and without any mocks at all. While these can sometimes be valuable, you should always strive to catch as many problems as you can much earlier in the testing cycle. The reason is that it will be difficult to pinpoint the error if a tests fails, and also that this type of tests will often be hard to reproduce due to network latency and data inconsistency. So therefore you should have at most a handful of E2E tests, perhaps something like a simple <a href=https://en.wikipedia.org/wiki/Sanity_check#Software_development>sanity check</a> just before deploying to production.</p><p>Some examples of different kinds of E2E tests:</p><ul><li>Manual <a href=https://en.wikipedia.org/wiki/Smoke_testing_(software)>smoke tests</a>.</li><li>Cypress tests with the real backend.</li></ul><p>The official <a href=https://docs.cypress.io/guides/guides/network-requests.html#Testing-Strategies>Cypress documentation</a> agrees with my view that the number of E2E tests should be kept at a minimum:</p><blockquote><p><em>It is a good idea to have end-to-end tests around your application’s critical paths. These typically include user login, signup, or other critical paths such as billing.</em> > <em>[&mldr;]</em></p><ul><li><em>Use [stubbing] for the vast majority of tests</em></li><li><em>Mix and match, typically have one true end-to-end test, and then stub the rest</em></li></ul></blockquote><h2 id=summary>Summary</h2><p>Whether you agree with my opinion on different types of tests or not, I always think it is a good idea to discuss such matters with your fellow team members and agree upon a written-down testing strategy to follow. This will both make it easier for you as a team to prioritize automated testing and make onboarding of new team members easier. Feel free to use the above as a starting point or come up with your own testing strategy!</p><p>Once you have the core definitions in place, you can continue to enhance your team&rsquo;s testing strategy by summarizing important general guidelines and useful best practices. I will write more on this topic in my next post so stay tuned!</p></div></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Gustav Sundin</span></div><div class=authorbox__description>My name is Gustav Sundin and I currently work as software engineering consultant at Devies in Gothenburg, Sweden. I also hold a Master’s degree in Software Engineering from Chalmers University. A cool thing with that is that I am allowed to titulate myself “Master of Software Engineering”!</div><br>Follow me with <b><a href=/index.xml>RSS</a></b>.</br><br><i>Did I make a mistake? Please feel free to <b><a href=https://github.com/Sundin/sundin.github.io>issue a pull request to my Github repo</a></b>.</i></br></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/2019-03-29-dockerized-db-tests/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Dockerized database testing</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/2019-08-07-testing-best-practices/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Testing: Best Practices</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/post/2021-04-14-kubernetes-tutorial/>A short Kubernetes tutorial</a></li><li class=widget__item><a class=widget__link href=/post/2021-04-12-avoid-else/>Avoid using else statements</a></li><li class=widget__item><a class=widget__link href=/post/2021-04-08-minimize-java-lambda-coldstarts/>Minimize Java Lambda Cold Start Times</a></li><li class=widget__item><a class=widget__link href=/post/2021-03-30-dynamodb-migrations/>Migrating data between DynamoDB tables</a></li><li class=widget__item><a class=widget__link href=/post/2020-11-11-dns-record-types/>DNS Record Types</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/AWS/>AWS</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Agility/>Agility</a>&nbsp;
<span class="widget__counter widget__counter--bubble">4</span></li><li class=widget__item><a class=widget__link href=/categories/Architecture/>Architecture</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/DNS/>DNS</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/Implementation/>Implementation</a>&nbsp;
<span class="widget__counter widget__counter--bubble">4</span></li><li class=widget__item><a class=widget__link href=/categories/Learning/>Learning</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Mindset/>Mindset</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Patterns/>Patterns</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Refactoring/>Refactoring</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Testing/>Testing</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Workflow/>Workflow</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Gustav Sundin.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>