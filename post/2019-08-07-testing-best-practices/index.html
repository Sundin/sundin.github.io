<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Testing: Best Practices - Master of Software Engineering</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Master of Software Engineering" rel=home><div class="logo__item logo__text"><div class=logo__title>Master of Software Engineering</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Testing: Best Practices</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Gustav Sundin</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-08-07T00:00:00Z>2019-08-07</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/Testing/ rel=category>Testing</a></span></div></div></header><div class="content post__content clearfix"><p>In this post I will describe a number of best practices I find useful to keep in mind when writing tests. It is intended to act as a complement to my previous post, [A successful testing strategy]({{ site.baseurl }}{% post_url 2019-06-26-a-successful-testing-strategy %}).</p><h2 id=code-coverage>Code coverage</h2><blockquote><p>&ldquo;100% code coverage tells you nothing, but less than 100% code coverage tells you something.&rdquo;</p></blockquote><pre><code>– Unknown
</code></pre><p>Aiming for covering 100% of your code with tests is probably not realistic and <a href=https://jeroenmols.com/blog/2017/11/28/coveragproblem/>perhaps not very useful neither</a>. I usually start by just writing one or two unit tests for each of my functions; one that tests some basic use case for the function and often another test that just calls the function with empty parameters. I tend to think that these two cases cover a large fraction of any potential bugs (by testing both the normal flow and an easy corner case) in the function with a minimal time investment in writing these tests. More advanced tests can be added over time as deemed necessary (see also the section on Recurring Bugs).</p><p>Without being overly concerned about your code coverage ratio, it is usually still a good idea to have some kind of code coverage check in the build pipeline. I usually find out what the current code coverage ratio is in the project, and then set that value as the minimum threshold in the pipeline. The idea here is mainly to make sure that new code that gets written is covered by unit tests, since the code coverage ratio would otherwise go below the minimum threshold. To keep the threshold check useful, you should strive at continuously increasing the threshold as your coverage ratio grows over time. Just be aware that deleting code (which always is a good thing!) might actually decrease your code coverage percentage, so be prepared to lower the threshold when that happens.</p><h2 id=recurring-bugs>Recurring Bugs</h2><p>Bugs happen. Live with it. But a bug should, never ever return after having been fixed before. Therefore, if you find a bug in production, <a href=http://www.extremeprogramming.org/rules/bugs.html>write a test that captures it</a>. A bug found in production means that you have a bug not only in your codebase, but also in your test suite since it allowed the bug to slink through.</p><h2 id=qa-ownership>QA Ownership</h2><p>The team owning the functionality should also own the entire test stack testing that functionality. This also implies that there is no need for a separate QA (Quality Assurance)/testing team within the organization. Likewise, having a separate tester role within the team should also be considered an organizational anti-pattern. Building software is a team effort and it is crucial that automated tests is considered a first-class citizen of your development process, as opposed to something that is half-heartedly latched on retrospectively after the code has already been written.</p><h2 id=what-to-test>What to Test</h2><p>All functionality owned by the team needs to be tested, but also interfaces that are consumed or exposed by services belonging to other teams.</p><h2 id=the-scope-of-a-single-test>The Scope of a Single Test</h2><p>Each test should only cover a minimal possible use case. Huge tests that tries to cover a large number of outcomes should be avoided. This approach might lead you to having to write a larger number of tests, but in return you will much easier be able to pinpoint the problem if a test fails.</p><h2 id=data-ownership>Data Ownership</h2><p>Tests should not be dependent on the same data as another test. This is because if one of the tests manipulates the shared data in some way, it will probably screw up for everyone else using the same data. That would mean that the test suite could give different results depending on the order in which the individual tests were executed, which is <a href=https://www.martinfowler.com/articles/nonDeterminism.html>not a good thing</a>. Instead, each test preferrably needs to be responsible for initializing its own set of data to use.</p><h2 id=time>Time</h2><p>Always mock time (current date, timezone etc.) in order to be able to redproduce the same test results if running them again on a different date or from a different location.</p><h2 id=non-verbosity>Non-verbosity</h2><p>Tests should be non-verbose and only print to the log if something unexpected happened. This will both make things easier to debug and make anything that is out of the ordinary draw your attention.</p></div></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Gustav Sundin</span></div><div class=authorbox__description>My name is Gustav Sundin and I currently work as software engineering consultant at Devies in Gothenburg, Sweden. I also hold a Master’s degree in Software Engineering from Chalmers University. A cool thing with that is that I am allowed to titulate myself “Master of Software Engineering”!</div><br>Follow me with <b><a href=/index.xml>RSS</a></b>.</br><br><i>Did I make a mistake? Please feel free to <b><a href=https://github.com/Sundin/sundin.github.io>issue a pull request to my Github repo</a></b>.</i></br></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/2019-06-26-a-successful-testing-strategy/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>A Successful Testing Strategy</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/2019-08-20-ethics-of-se/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>The Ethics of Software Engineering</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/post/2021-04-14-kubernetes-tutorial/>A short Kubernetes tutorial</a></li><li class=widget__item><a class=widget__link href=/post/2021-04-12-avoid-else/>Avoid using else statements</a></li><li class=widget__item><a class=widget__link href=/post/2021-04-08-minimize-java-lambda-coldstarts/>Minimize Java Lambda Cold Start Times</a></li><li class=widget__item><a class=widget__link href=/post/2021-03-30-dynamodb-migrations/>Migrating data between DynamoDB tables</a></li><li class=widget__item><a class=widget__link href=/post/2020-11-11-dns-record-types/>DNS Record Types</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/AWS/>AWS</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Agility/>Agility</a>&nbsp;
<span class="widget__counter widget__counter--bubble">4</span></li><li class=widget__item><a class=widget__link href=/categories/Architecture/>Architecture</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/DNS/>DNS</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/Implementation/>Implementation</a>&nbsp;
<span class="widget__counter widget__counter--bubble">4</span></li><li class=widget__item><a class=widget__link href=/categories/Learning/>Learning</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Mindset/>Mindset</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Patterns/>Patterns</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/Refactoring/>Refactoring</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Testing/>Testing</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/Workflow/>Workflow</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Gustav Sundin.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>